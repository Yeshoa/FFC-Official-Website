---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';

export interface Props {
  title: string;
  description: string;
  image: ImageMetadata;
  buttonText: string;
  buttonUrl?: string;
  imagePosition?: 'left' | 'right';
  backgroundColor?: string; // ej: "bg-green-900"
  noblank?: boolean; // Si es true, no abrirá en nueva pestaña
}

const { 
  title, 
  description, 
  image, 
  buttonText, 
  buttonUrl = "#",
  imagePosition = 'left',
  backgroundColor = "green-1000",
  noblank = false
} = Astro.props;

const bgColor = `bg-${backgroundColor}`;
const gradientFrom = `from-${backgroundColor}`;
---

<div class="relative w-full h-[500px] overflow-hidden shadow-2xl">
  
  <!-- Layout en dos columnas: imagen + texto -->
  <div class={`flex flex-row ${imagePosition === 'left' ? '' : 'flex-row-reverse'} h-full`}>
    
    <!-- Imagen: 50% -->
    <div class="w-1/2 h-full relative z-0">
      <Image 
      src={image} 
      alt={title}
      height={500}
      format="webp"
      quality={70}
      class="w-full h-full object-cover"
      />
      <div class={`absolute inset-0 pointer-events-none ${imagePosition === 'left' ? 'bg-gradient-to-l' : 'bg-gradient-to-r'} ${gradientFrom} to-transparent`}></div>
    </div>

    <!-- Texto: 50% -->
    <div class={`w-1/2 h-full flex items-center justify-center p-8 md:p-12 lg:p-16 ${bgColor} relative z-0`}>
      <div class="max-w-lg text-white text-center md:text-left z-20">
        <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-6 leading-tight">
          {title}
        </h2>
        <p class="text-lg md:text-xl text-gray-200 mb-8 leading-relaxed">
          {description}
        </p>
        <a 
          href={buttonUrl}
          class="inline-block px-8 py-4 bg-white text-gray-900 font-semibold rounded-full 
                 hover:bg-gray-100 transform hover:scale-105 transition-all duration-300 
                 shadow-lg hover:shadow-xl"
          target={noblank ? "_self" : "_blank"}
        >
          {buttonText}
        </a>
      </div>
    </div>

  </div>
</div>
