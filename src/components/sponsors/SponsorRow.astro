---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';

interface Props {
  sponsor: CollectionEntry<'sponsors'>;
}

const { sponsor } = Astro.props;
const { name, image, member, backgroundColor, description, type } = sponsor.data;
const imageBg = backgroundColor || '#ffffff';
---
<article class="w-full bg-white/4 border border-white/6 rounded-2xl p-3 flex items-center gap-4 shadow-sm backdrop-blur-sm">
  <div class="flex-shrink-0">
    <div
      class="w-28 h-20 md:w-32 md:h-24 rounded-lg flex items-center justify-center overflow-hidden"
      style={`background-color: ${imageBg}`}
      aria-hidden="false"
    >
      <Image
        src={image}
        alt={name}
        class="max-w-full max-h-full object-contain p-2"
        loading="lazy"
        format="webp"
        quality={60}
        width={400}
      />
    </div>
  </div>

  <div class="flex-1 min-h-0">
    <div class="flex items-start justify-between gap-3">
      <h3 class="text-base md:text-lg font-bold text-white leading-tight">{name}</h3>
      {type && (
        <span class="text-xs md:text-sm px-2 py-1 rounded-full bg-white/8 text-white/90 font-semibold">
          {type}
        </span>
      )}
    </div>

    {member && (
      <p class="text-sm text-white/80 mt-1">From: <span class="font-semibold text-white">{member}</span></p>
    )}

    {description && (
      <p class="text-sm text-white/80 mt-2 line-clamp-3">{description}</p>
    )}
  </div>
</article>

<style>
.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
</style>
